<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
	<link rel="icon" href="apple-touch-icon.png">
    <title>HTML Preview</title>
    <style>
        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            margin: 0; padding: 20px; background: #f4f4f7; 
            display: flex; justify-content: center;
        }
        .container { 
            width: 100%; max-width: 800px; 
            display: flex; flex-direction: column; gap: 15px; 
        }
        
        h2 { margin: 0; color: #333; }

        textarea { 
            width: 100%; height: 400px; padding: 15px; 
            border: 1px solid #ced4da; border-radius: 8px; 
            font-family: 'Courier New', monospace; font-size: 16px; 
            box-sizing: border-box; background: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            /* Disable text wrapping and enable horizontal scroll */
            white-space: pre;
            overflow-x: auto;
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        button { 
            flex: 1; min-width: 120px; padding: 16px; 
            border: none; border-radius: 8px; 
            font-weight: bold; font-size: 1rem; cursor: pointer;
            transition: background 0.2s, transform 0.1s;
        }

        .btn-primary { background: #007bff; color: white; }
        .btn-secondary { background: #6c757d; color: white; }

        button:hover { opacity: 0.9; }
        button:active { transform: scale(0.99); }

        /* Mobile specific layout for buttons */
        @media (max-width: 599px) {
            .btn-primary {
                flex: 1 1 100%; /* Forces preview button to its own line */
            }
            .btn-secondary {
                flex: 1; /* Keeps paste/copy side-by-side */
            }
        }

        @media (min-width: 600px) {
            button { flex: 0 1 auto; padding: 12px 30px; }
        }
    </style>
</head>
<body>

<div class="container">
    <h2>HTML Preview</h2>
    <textarea id="code-input" placeholder="Paste your HTML, CSS, and JS here..." autofocus></textarea>

    <div class="button-group">
        <button class="btn-primary" onclick="openPreview()">Open Preview</button>
        <button class="btn-secondary" onclick="pasteFromClipboard()">Paste</button>
        <button class="btn-secondary" onclick="copyToClipboard()">Copy</button>
    </div>
</div>

<script>
    let currentBlobURL = null;
    const codeArea = document.getElementById('code-input');

    function openPreview() {
        const code = codeArea.value;

        if (!code.trim()) {
            alert("Please enter some code first.");
            return;
        }

        if (currentBlobURL) {
            URL.revokeObjectURL(currentBlobURL);
        }

        const blob = new Blob([code], { type: 'text/html' });
        currentBlobURL = URL.createObjectURL(blob);

        const win = window.open(currentBlobURL, '_blank');
        
        if (!win) {
            alert("Pop-up blocked! Please allow pop-ups to open the preview.");
        }
    }

    async function pasteFromClipboard() {
        try {
            const text = await navigator.clipboard.readText();
            codeArea.value = text;
        } catch (err) {
            alert("Failed to read clipboard. Ensure you granted permissions.");
        }
    }

    function copyToClipboard() {
        const code = codeArea.value;
        if (!code) return;

        navigator.clipboard.writeText(code).then(() => {
            alert("Code copied to clipboard!");
        }).catch(err => {
            alert("Failed to copy text.");
        });
    }
</script>

</body>
</html>
